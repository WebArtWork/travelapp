import{$ as S,A as b,Aa as E,B as p,Ca as W,Da as L,E as w,Ea as N,Fa as A,G as v,J as d,K as _,L as y,O as k,P,Q as O,Sa as B,Ua as j,Y as g,Za as D,_ as F,_a as h,aa as T,ba as I,cb as U,db as z,eb as K,k as C,m as M,n as x,oa as V,r as f,s as u}from"./chunk-Y6LYE74S.js";function H(r,o){if(r&1&&g(0),r&2){let s=o.$implicit;F(" ",s.components==null?null:s.components.length," ")}}function J(r,o){if(r&1){let s=k();d(0,"label",3)(1,"input",4),P("ngModelChange",function(){let e=f(s).$implicit,i=O();return u(i.changeStatus(e))}),I("ngModelChange",function(e){let i=f(s).$implicit;return T(i.active,e)||(i.active=e),u(e)}),_(),y(2,"span",5),d(3,"span",6),g(4,"Active"),_()()}if(r&2){let s=o.$implicit;b(),S("ngModel",s.active)}}var R=(()=>{let o=class o{get rows(){return this._form.customForms}constructor(a,e,i){this._translate=a,this._alert=e,this._form=i,this.columns=["title","components","formId","active"],this.form=this._form.getForm("form",{formId:"form",title:"Custom form",components:[{name:"Text",key:"title",focused:!0,fields:[{name:"Placeholder",value:"fill title"},{name:"Label",value:"Title"}]},{name:"Select",key:"formId",fields:[{name:"Placeholder",value:"Select form id"},{name:"Label",value:"Form ID"},{name:"Items",value:this._form.formIds}]}]}),this.components=[],this.formComponents=this._form.getForm("formComponents",{formId:"formComponents",title:"Custom components",components:[{components:this.components},{name:"Select",key:"addComponent",fields:[{name:"Placeholder",value:"Select form componnet"},{name:"Label",value:"Form Component"},{name:"Value",value:"name",skipTranslation:!0},{name:"Items",value:this._form.components}]}]}),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(n,m)=>{this._form.create(n,m.bind(this))}}).then(this._form.create.bind(this))},update:n=>{this._form.modal(this.form,{label:"Update",click:(m,l)=>{this._form.update(m,l.bind(this))}},n).then(this._form.update.bind(this))},delete:n=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this user?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._form.delete(n)}}]})},buttons:[{icon:"text_fields",click:n=>{this.components.splice(0,this.components.length);let m={addComponent:"Text"};for(let t=0;t<n.components.length;t++){m["key"+t]=n.components[t].key;for(let c of n.components[t].fields)m[c.name+t]=c.value}let l=t=>{this.components.splice(t,1),n.components.splice(t,1),this._form.save(n)};(n.components||[]).forEach((t,c)=>{this.components.push(this._addCustomComponent(t.name,t.fields?.map(q=>q.name),this.components.length,l))}),this._form.modal(this.formComponents,{label:"Add component",click:()=>{let t=this._form.components.find(c=>c.name===m.addComponent)?.fields;this.components.push(this._addCustomComponent(m.addComponent,t,this.components.length,l)),n.components.push({name:m.addComponent,fields:t.map(c=>({value:"",name:c}))})}},m,()=>{},{size:"big"}).then(()=>{for(let t=0;t<n.components.length;t++){n.components[t].key=m["key"+t];for(let c of n.components[t].fields)c.value=m[c.name+t]}this._form.save(n)})}}]}}_addCustomComponent(a,e,i,n){return{class:"d-f mt10",components:[{name:"Text",key:"key"+i,root:!0,fields:[{name:"Placeholder",value:"fill key"},{name:"Label",value:"Key"}]},...(e||[])?.map(l=>({name:this._form.customFieldComponent[a+l]||"Text",key:l+i,root:!0,fields:[{name:"Placeholder",value:"fill "+l},{name:"Label",value:l.charAt(0).toUpperCase()+l.slice(1,l.length)}]})),{name:"Button",fields:[{name:"Label",value:"Remove"},{name:"Click",value:()=>{n(i)}}]}]}}changeStatus(a){setTimeout(()=>{if(a.active)for(let e of this._form.customForms)e._id===a._id||e.formId!==a.formId||e.active&&(e.active=!1,this._form.save(e));this._form.save(a)})}};o.\u0275fac=function(e){return new(e||o)(p(B),p(D),p(h))},o.\u0275cmp=M({type:o,selectors:[["ng-component"]],decls:3,vars:3,consts:[["title","Forms",3,"columns","config","rows"],["cell","components"],["cell","active"],[1,"container-box"],["type","checkbox",1,"w-input__checkbox",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"checkmark-text"]],template:function(e,i){e&1&&(d(0,"wtable",0),w(1,H,1,1,"ng-template",1)(2,J,5,1,"ng-template",2),_()),e&2&&v("columns",i.columns)("config",i.config)("rows",i.rows)},dependencies:[W,L,N,z,U],styles:['.container-box[_ngcontent-%COMP%]{position:relative;display:flex}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;height:20px;width:20px;background-color:#0f353d0f;border-radius:50%;transition:all .3s}.container-box[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#0f353d60}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:var(--c-primary)}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkmark[_ngcontent-%COMP%]:before{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:before{display:block}.container-box[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:6px;top:46%;width:5px;height:10px;border:solid white;border-width:0 1.5px 1.5px 0;transform:rotate(45deg) translate(-50%,-50%)}.check[_ngcontent-%COMP%]{max-width:100px}.checkmark-text[_ngcontent-%COMP%]{margin-left:28px;display:block}']});let r=o;return r})();var Q=[{path:"",component:R}],fe=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=x({type:o}),o.\u0275inj=C({imports:[E.forChild(Q),A,V,j,K]});let r=o;return r})();export{fe as FormsModule};
