import{g as q}from"./chunk-LLF3BWW6.js";import"./chunk-SZPVBJCN.js";import{$ as s,A as w,B as F,C as E,Ga as L,H as x,Ha as $,I as g,J as P,K as O,S as Y,T as l,U as D,Va as N,W as v,Y as h,_ as V,a as M,aa as c,ab as B,ba as k,db as j,ea as y,eb as A,fa as f,fb as W,ga as p,hb as z,lb as Z,mb as R,oa as d,pa as u,qa as T,ra as b,sb as G,tb as U,va as H,x as I,y as S}from"./chunk-XJM3K4MS.js";var J=(()=>{let r=class r extends j{constructor(e,t,a,o){super({name:"travelappointment"},e,t,a,o),this.travelappointments=[],this.travelappointmentsByDate={},this.get().subscribe(m=>{this.travelappointments.push(...m),m.forEach(_=>{let C=this.date(_);this.travelappointmentsByDate[C]=this.travelappointmentsByDate[C]||[],this.travelappointmentsByDate[C].push(_)})}),o.on("travelappointment_create").subscribe(m=>{this.travelappointments.push(m);let _=this.date(m);this.travelappointmentsByDate[_]=this.travelappointmentsByDate[_]||[],this.travelappointmentsByDate[_].push(m)}),o.on("travelappointment_delete").subscribe(m=>{this.travelappointments.splice(this.travelappointments.findIndex(C=>C._id===m._id),1);let _=this.date(m);this.travelappointmentsByDate[_].splice(this.travelappointmentsByDate[_].findIndex(C=>C._id===m._id),1)})}date(e,t="."){return`${e.year}${t}${e.month}${t}${e.day}`}};r.\u0275fac=function(t){return new(t||r)(w(W),w(A),w(z),w(B))},r.\u0275prov=I({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var ee=()=>[1,2,3,4,5,6,7];function te(i,r){if(i&1&&(s(0,"span",21),d(1),c()),i&2){let n=p().$implicit,e=p(2);l(),u(e.dayTitle[n])}}function ne(i,r){if(i&1){let n=y();s(0,"div",23),f("click",function(t){let a=x(n).$implicit;return p(4).eventClicked(a),g(t.stopPropagation())}),s(1,"span",24),d(2),c(),s(3,"div",25),d(4),c()()}if(i&2){let n=r.$implicit;l(2),b("",n.from," - ",n.to,""),l(2),T(" ",n.fromTime," ")}}function ie(i,r){if(i&1&&(s(0,"span")(1,"span"),d(2),c(),s(3,"div"),v(4,ne,5,3,"div",22),c()()),i&2){let n=p().$implicit,e=p(2);l(2),u(e.startDay+n),l(2),h("ngForOf",e.tad[e.date(e.previousYear,e.previousMonth,e.startDay+n)])}}function ae(i,r){if(i&1){let n=y();s(0,"div",23),f("click",function(t){let a=x(n).$implicit;return p(4).eventClicked(a),g(t.stopPropagation())}),s(1,"span",24),d(2),c(),s(3,"div",25),d(4),c()()}if(i&2){let n=r.$implicit;l(2),b("",n.from," - ",n.to,""),l(2),T(" ",n.fromTime," ")}}function re(i,r){if(i&1&&(s(0,"span")(1,"div"),d(2),c(),s(3,"div"),v(4,ae,5,3,"div",22),c()()),i&2){let n=p().$implicit,e=p().index,t=p();l(2),u(n+e*7-t.skipDays),l(2),h("ngForOf",t.tad[t.date(t.currentYear,t.currentMonth,n+e*7-t.skipDays)])}}function oe(i,r){if(i&1){let n=y();s(0,"div",23),f("click",function(t){let a=x(n).$implicit;return p(4).eventClicked(a),g(t.stopPropagation())}),s(1,"span",24),d(2),c(),s(3,"div",25),d(4),c()()}if(i&2){let n=r.$implicit;l(2),b("",n.from," - ",n.to,""),l(2),T(" ",n.fromTime," ")}}function se(i,r){if(i&1&&(s(0,"span")(1,"div"),d(2),c(),s(3,"div"),v(4,oe,5,3,"div",22),c()()),i&2){let n=p().$implicit,e=p(2);l(2),u(n-e.keepDays),l(2),h("ngForOf",e.tad[e.date(e.nextYear,e.nextMonth,n-e.keepDays)])}}function le(i,r){if(i&1){let n=y();s(0,"span",18),f("click",function(){let t=x(n).$implicit,a=p().index,o=p();return g(o.dateClicked(!a&&o.skipDays>=t?o.date(o.previousYear,o.previousMonth,o.startDay+t):a===o.weeksInMonth.length-1&&o.keepDays<t?o.date(o.nextYear,o.nextMonth,t-o.keepDays):o.date(o.currentYear,o.currentMonth,t+a*7-o.skipDays)))}),v(1,te,2,1,"span",19)(2,ie,5,2,"span",20)(3,re,5,2,"span",20)(4,se,5,2,"span",20),c()}if(i&2){let n=r.$implicit,e=p().index,t=p();l(),h("ngIf",!e),l(),h("ngIf",!e&&t.skipDays>=n),l(),h("ngIf",e&&e!==t.weeksInMonth.length-1||e===t.weeksInMonth.length-1&&t.keepDays>=n||!e&&t.skipDays<n),l(),h("ngIf",e===t.weeksInMonth.length-1&&t.keepDays<n)}}function ce(i,r){if(i&1&&(s(0,"div",15)(1,"span",16),d(2),c(),v(3,le,5,4,"span",17),c()),i&2){let n=r.$implicit;l(2),u(n),l(),h("ngForOf",H(2,ee))}}function pe(i,r){i&1&&k(0,"div",26)}function de(i,r){if(i&1){let n=y();s(0,"div",29),f("click",function(){let t=x(n).$implicit,a=p(2);return g(a.updateAppointment(t))}),s(1,"div",30),P(),s(2,"svg",31)(3,"g",32),k(4,"path",33)(5,"path",34)(6,"path",35)(7,"path",36)(8,"path",37)(9,"path",38),c(),s(10,"defs")(11,"clipPath",39),k(12,"rect",40),c()()()(),O(),s(13,"div",41)(14,"span",42),d(15),c(),s(16,"div",43),d(17),c()()()}if(i&2){let n=r.$implicit;l(15),b("",n.from," - ",n.to,""),l(2),u(n.fromTime)}}function _e(i,r){if(i&1){let n=y();s(0,"div",27),v(1,de,18,3,"div",28),s(2,"div",2),f("click",function(){x(n);let t=p();return g(t.createAppointment(t.selectedDate))}),d(3," BLOCK WHICH ADD NEW EVENT "),c()()}if(i&2){let n=p();l(),h("ngForOf",n.tad[n.selectedDate])}}var Q=(()=>{let r=class r{constructor(e,t,a,o){this._tas=e,this._translate=t,this._alert=a,this._form=o,this.dayTitle={1:"\u041F\u041D",2:"\u0412\u0422",3:"\u0421\u0420",4:"\u0427\u0422",5:"\u041F\u0422",6:"\u0421\u0411",7:"\u041D\u0414"},this.monthTitle={0:"\u0421\u0456\u0447\u0435\u043D\u044C",1:"\u041B\u044E\u0442\u0438\u0439",2:"\u0411\u0435\u0440\u0435\u0437\u0435\u043D\u044C",3:"\u041A\u0432\u0456\u0442\u0435\u043D\u044C",4:"\u0422\u0440\u0430\u0432\u0435\u043D\u044C",5:"\u0427\u0435\u0440\u0432\u0435\u043D\u044C",6:"\u041B\u0438\u043F\u0435\u043D\u044C",7:"\u0421\u0435\u0440\u043F\u0435\u043D\u044C",8:"\u0412\u0435\u0440\u0435\u0441\u0435\u043D\u044C",9:"\u0416\u043E\u0432\u0442\u0435\u043D\u044C",10:"\u041B\u0438\u0441\u0442\u043E\u043F\u0430\u0434",11:"\u0413\u0440\u0443\u0434\u0435\u043D\u044C"},this.tad=this._tas.travelappointmentsByDate,this.form=this._form.getForm("travelappointment",{formId:"travelappointment",title:"Appointment",components:[{name:"Text",key:"from",focused:!0,fields:[{name:"Placeholder",value:"fill from city"},{name:"Label",value:"From City"}]},{name:"Text",key:"fromTime",fields:[{name:"Placeholder",value:"fill from time"},{name:"Label",value:"From Time"}]},{name:"Text",key:"fromHref",fields:[{name:"Placeholder",value:"fill from href"},{name:"Label",value:"From Href"}]},{name:"Text",key:"to",fields:[{name:"Placeholder",value:"fill to city"},{name:"Label",value:"To City"}]},{name:"Text",key:"toHref",fields:[{name:"Placeholder",value:"fill to href"},{name:"Label",value:"To Href"}]},{name:"Text",key:"toTime",fields:[{name:"Placeholder",value:"fill to time"},{name:"Label",value:"To Time"}]},{name:"Text",key:"phone",fields:[{name:"Placeholder",value:"fill phone"},{name:"Label",value:"To Phone"}]}]}),this.currentMonth=new Date().getMonth(),this.currentYear=new Date().getFullYear(),this.weeksInMonth=[],this.startDay=0,this.skipDays=0,this.keepDays=0,this._onMonthChange(),this.onResize()}createAppointment(e){let t={year:Number(e.split(".")[0]),month:Number(e.split(".")[1]),day:Number(e.split(".")[2])};this._form.modal(this.form,{label:"Create",click:(a,o)=>{this._tas.create(M(M({},t),a),{alert:this._translate.translate("Travel.Appointment has been created"),callback:()=>{o()}})}},t).then(this._tas.create.bind(this))}updateAppointment(e){this._form.modal(this.form,[{label:this._translate.translate("Common.Delete"),class:"left",click:(t,a)=>{a(),this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this appointment?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._tas.delete(M({},e),{alert:this._translate.translate("Travel.Appointment has been deleted")})}}]})}},{label:this._translate.translate("Common.Update"),class:"right",click:(t,a)=>{this._tas.update(M(M({},e),t),{alert:this._translate.translate("Travel.Appointment has been updated"),callback:()=>{a()}})}}],e)}setNow(){this.currentMonth=new Date().getMonth(),this.currentYear=new Date().getFullYear(),this._onMonthChange()}setPreviousMonth(){this.currentMonth--,this.currentMonth===-1&&(this.currentMonth=11,this.currentYear--),this._onMonthChange()}setNextMonth(){this.currentMonth++,this.currentMonth===12&&(this.currentMonth=0,this.currentYear++),this._onMonthChange()}_onMonthChange(){this.currentMonth===11?(this.previousMonth=10,this.previousYear=this.currentYear,this.nextMonth=0,this.nextYear=this.currentYear+1):this.currentMonth===0?(this.previousMonth=11,this.previousYear=this.currentYear-1,this.nextMonth=1,this.nextYear=this.currentYear):(this.previousMonth=this.currentMonth-1,this.previousYear=this.currentYear,this.nextMonth=this.currentMonth+1,this.nextYear=this.currentYear);let e=new Date(this.currentYear,this.currentMonth,1),t=this.getWeekNumber(e);this.weeksInMonth=[];let a=this.getWeeksInMonth(this.currentMonth,this.currentYear);for(let _=0;_<a;_++)this.weeksInMonth.push(t+_);this.skipDays=(e.getDay()===0?7:e.getDay())-1;let o=this.currentMonth>1?this.getDaysInMonth(this.currentMonth-1,this.currentYear):this.getDaysInMonth(11,this.currentYear-1),m=this.getDaysInMonth(this.currentMonth,this.currentYear);this.startDay=o-this.skipDays,this.keepDays=(m+this.skipDays)%7,this.selectedDate=""}onResize(){this.isMobile=window.innerWidth<=768}date(e,t,a,o="."){return`${e}${o}${t}${o}${a}`}dateClicked(e){this.isMobile?this.selectedDate=e:this.createAppointment(e)}eventClicked(e){this.isMobile?this.selectedDate=this._tas.date(e):this.updateAppointment(e)}getWeekNumber(e){let t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));let a=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-a.getTime())/864e5+1)/7)}getWeeksInMonth(e,t){let a=new Date(t,e,1),o=new Date(t,e+1,0),m=this.getWeekNumber(a),_=this.getWeekNumber(o);return m>_&&(_=this.getWeekNumber(new Date(t,11,31))),_-m+1}getDaysInMonth(e,t){return new Date(t,e+1,0).getDate()}};r.\u0275fac=function(t){return new(t||r)(D(J),D(Z),D(G),D(U))},r.\u0275cmp=F({type:r,selectors:[["ng-component"]],hostBindings:function(t,a){t&1&&f("resize",function(){return a.onResize()},!1,Y)},decls:21,vars:7,consts:[[1,"calendar-nav"],[1,"calendar-nav__today"],[3,"click"],[1,"calendar-nav-year"],[1,"calendar-nav-year__buttons"],[1,"material-icons","arrow-back",3,"click"],["width","34","height","34","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.94961 2.7043L8.89219 2.75352L4.61289 6.47227C4.46797 6.59805 4.37773 6.78672 4.37773 6.99727C4.37773 7.20781 4.4707 7.39648 4.61289 7.52227L8.88398 11.2383L8.95508 11.3012C9.02344 11.3477 9.10547 11.375 9.19297 11.375C9.43086 11.375 9.625 11.1727 9.625 10.9211L9.625 3.07891C9.625 2.82734 9.43086 2.625 9.19297 2.625C9.10273 2.625 9.01797 2.65508 8.94961 2.7043Z","fill","black"],[1,"calendar-nav-year__data"],[1,"material-icons","arrow-next",3,"click"],["d","M5.05039 11.2957L5.10781 11.2465L9.38711 7.52773C9.53203 7.40195 9.62227 7.21328 9.62227 7.00273C9.62227 6.79219 9.5293 6.60352 9.38711 6.47773L5.11602 2.76172L5.04492 2.69883C4.97656 2.65234 4.89453 2.625 4.80703 2.625C4.56914 2.625 4.375 2.82734 4.375 3.07891V10.9211C4.375 11.1727 4.56914 11.375 4.80703 11.375C4.89727 11.375 4.98203 11.3449 5.05039 11.2957Z","fill","black"],[1,"calendar"],["class","calendar__row",4,"ngFor","ngForOf"],["class","line",4,"ngIf"],["class","events-wrapper",4,"ngIf"],[1,"calendar__row"],[1,"calendar__week"],["class","calendar__day",3,"click",4,"ngFor","ngForOf"],[1,"calendar__day",3,"click"],["class","calendar__day-name",4,"ngIf"],[4,"ngIf"],[1,"calendar__day-name"],["class","calendar-events",3,"click",4,"ngFor","ngForOf"],[1,"calendar-events",3,"click"],[1,"calendar-events__text"],[1,"calendar-events__time"],[1,"line"],[1,"events-wrapper"],["class","event__item",3,"click",4,"ngFor","ngForOf"],[1,"event__item",3,"click"],[1,"event__icon"],["width","40","height","40","viewBox","0 0 40 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_120_2)"],["d","M5.38231 1.1333C2.68075 1.1333 1.16199 2.53004 1.16199 5.38396V34.8037C1.16199 37.4732 2.52741 38.8709 5.22682 38.8709H34.771C37.4705 38.8709 38.838 37.5428 38.838 34.8037V5.38396C38.838 2.59964 37.4705 1.1333 34.6862 1.1333C34.6862 1.1333 5.37303 1.12396 5.38231 1.1333Z","fill","#256EFF","stroke","#256EFF","stroke-width","3.408"],["d","M20.1713 6.70935C17.5403 6.70935 13.9067 7.46112 12.4032 8.08759C10.8996 8.71406 9.8973 9.34053 9.58409 10.9067L8.45651 19.5891V31.5528H10.3985V33.429C10.3985 35.7165 13.7461 35.7165 13.7461 33.429V31.5528H19.9263H19.9459H26.3712V33.429C26.3712 35.7165 29.7187 35.7165 29.7187 33.429V31.5528H31.6607V19.5891L30.5331 10.9067C30.2199 9.34053 29.2176 8.71406 27.714 8.08759C26.2105 7.46112 22.5769 6.70935 19.9459 6.70935","fill","white"],["d","M28.0436 27.8023C28.9304 27.8023 29.6493 27.0833 29.6493 26.1965C29.6493 25.3097 28.9304 24.5906 28.0436 24.5906C27.1568 24.5906 26.4377 25.3097 26.4377 26.1965C26.4377 27.0833 27.1568 27.8023 28.0436 27.8023Z","fill","#256EFF"],["d","M12.0736 27.8023C11.1868 27.8023 10.4679 27.0833 10.4679 26.1965C10.4679 25.3097 11.1868 24.5906 12.0736 24.5906C12.9604 24.5906 13.6794 25.3097 13.6794 26.1965C13.6794 27.0833 12.9604 27.8023 12.0736 27.8023Z","fill","#256EFF"],["d","M19.9344 10.3115H15.285C14.3453 10.3115 14.3453 8.90198 15.285 8.90198H19.9459H24.8322C25.7719 8.90198 25.7719 10.3115 24.8322 10.3115H19.9344Z","fill","#256EFF"],["d","M19.9344 11.7346H12.7516C11.7589 11.7346 11.4996 12.2391 11.3791 13.0041L10.5014 19.3014C10.4195 19.9049 10.5941 20.5041 11.4281 20.5041H19.9458H28.6891C29.523 20.5041 29.6977 19.9049 29.6158 19.3014L28.7381 13.0041C28.6176 12.2391 28.3583 11.7346 27.3656 11.7346H19.9344Z","fill","#256EFF"],["id","clip0_120_2"],["width","40","height","40","fill","white"],[1,"event-text"],[1,"event-text__title"],[1,"event-text__time"]],template:function(t,a){t&1&&(s(0,"div",0)(1,"div",1)(2,"wbutton",2),f("click",function(){return a.setNow()}),d(3,"\u0421\u044C\u043E\u0433\u043E\u0434\u043D\u0456"),c()(),s(4,"div",3)(5,"div",4)(6,"i",5),f("click",function(){return a.setPreviousMonth()}),P(),s(7,"svg",6),k(8,"path",7),c()(),O(),s(9,"div",8)(10,"span"),d(11),c(),s(12,"span"),d(13),c()(),s(14,"i",9),f("click",function(){return a.setNextMonth()}),P(),s(15,"svg",6),k(16,"path",10),c()()()()(),O(),s(17,"div",11),v(18,ce,4,3,"div",12),c(),v(19,pe,1,0,"div",13)(20,_e,4,1,"div",14)),t&2&&(l(11),u(a.monthTitle[a.currentMonth]),l(2),u(a.currentYear),l(4),V("calendar-mobile",a.isMobile),l(),h("ngForOf",a.weeksInMonth),l(),h("ngIf",a.isMobile&&a.selectedDate),l(),h("ngIf",a.isMobile&&a.selectedDate))},dependencies:[L,$,R],styles:['@charset "UTF-8";.calendar[_ngcontent-%COMP%]{padding-top:20px;display:flex;flex-direction:column;height:100vh}.calendar__row[_ngcontent-%COMP%]{flex:1;display:flex;position:relative}.calendar__day[_ngcontent-%COMP%]{flex:1;background:var(--c-calendar);margin:4px;padding:15px;border-radius:10px;text-align:center;font-weight:900;display:flex;flex-flow:column wrap}.calendar__day-name[_ngcontent-%COMP%]{color:var(--day-name);font-size:12px;font-weight:700;padding-bottom:3px}.calendar__week[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;background:#625959;display:flex;align-items:center;justify-content:center;border-radius:5px;color:#fff;top:-10px;left:-10px}.calendar-time[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--c-primary);line-height:1;justify-content:center}.calendar-time__clock[_ngcontent-%COMP%]{display:flex;margin-right:7px}.calendar-time__clock[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--c-primary)}.calendar-events[_ngcontent-%COMP%]{font-size:12px;background:var(--events);border-radius:5px;font-weight:500;color:#fff;padding:5px;display:flex;justify-content:space-between}.calendar-events__text[_ngcontent-%COMP%]{font-weight:900}.calendar-nav[_ngcontent-%COMP%], .calendar-nav-year[_ngcontent-%COMP%]{display:flex;align-items:center}.calendar-nav-year__buttons[_ngcontent-%COMP%]{display:flex;align-items:center;width:250px;justify-content:space-between}.calendar-nav-year__buttons[_ngcontent-%COMP%]   .arrow-back[_ngcontent-%COMP%]{cursor:pointer}.calendar-nav-year__buttons[_ngcontent-%COMP%]   .arrow-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--c-primary)}.calendar-nav-year__buttons[_ngcontent-%COMP%]   .arrow-next[_ngcontent-%COMP%]{cursor:pointer}.calendar-nav-year__buttons[_ngcontent-%COMP%]   .arrow-next[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--c-primary)}.calendar-nav-year__data[_ngcontent-%COMP%]{margin:0 15px;font-size:20px}.calendar-nav-year__data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{margin-left:10px}.calendar-nav__today[_ngcontent-%COMP%]{margin-right:20px}.line[_ngcontent-%COMP%]{width:100%;z-index:1;background:#fff;height:1px;margin:15px 0}.event__item[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid rgba(255,255,255,.3490196078)}.event__icon[_ngcontent-%COMP%]{margin-right:10px}.event-text__title[_ngcontent-%COMP%]{font-weight:700}@media screen and (max-width: 767px){.calendar__day[_ngcontent-%COMP%]{margin:4px;padding:8px;font-size:12px}.calendar-events[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-events[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:none}.calendar__row[_ngcontent-%COMP%]{max-height:70px}.calendar__week[_ngcontent-%COMP%]{font-size:12px}.calendar__week[_ngcontent-%COMP%]{width:22px;height:22px;top:-5px;left:-5px;font-size:12px}.calendar[_ngcontent-%COMP%]{height:fit-content}.calendar__day[_ngcontent-%COMP%]{margin:4px;padding:8px;font-size:12px;min-height:66px}.calendar-events[_ngcontent-%COMP%]{padding:3px}}']});let i=r;return i})();var me=[{path:"",component:Q}],be=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=E({type:r}),r.\u0275inj=S({imports:[N.forChild(me),q]});let i=r;return i})();export{be as CalendarModule};
